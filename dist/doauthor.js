var DoAuthorBootstrapper;(()=>{"use strict";var o={d:(r,t)=>{for(var e in t)o.o(t,e)&&!o.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:t[e]})},o:(o,r)=>Object.prototype.hasOwnProperty.call(o,r),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},r={};o.r(r),o.d(r,{main:()=>t,observePeriodMsec:()=>e,observeMany:()=>i});const t=async()=>(window.sodium={onload:o=>{window.doauthor={server:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),saltSize:16,hashSize:32,keySize:32,defaultParams:{opsLimit:o.crypto_pwhash_OPSLIMIT_SENSITIVE,memLimit:5*o.crypto_pwhash_MEMLIMIT_MIN}},window.doauthor.crypto={},window.doauthor.crypto.show=r=>o.to_base64(r,o.base64_variants.URLSAFE),window.doauthor.crypto.read=r=>o.from_base64(r,o.base64_variants.URLSAFE),window.doauthor.crypto.slipConfig=()=>({ops:doauthor.defaultParams.opsLimit,mem:doauthor.defaultParams.memLimit,saltSize:doauthor.saltSize}),window.doauthor.crypto.mainKey=o=>{const r=localStorage.getItem("slip");if(r)return doauthor.crypto.mainKeyReproduce2(o,JSON.parse(r));{let[r,t]=doauthor.crypto.mainKeyInit2(o,doauthor.crypto.slipConfig());return localStorage.setItem("slip",JSON.stringify(t)),r}},window.doauthor.crypto.mainKeyInit2=(r,t)=>{const e={...t,salt:doauthor.crypto.show(o.randombytes_buf(t.saltSize))};return[doauthor.crypto.mainKeyReproduce2(r,e),e]},window.doauthor.crypto.mainKeyReproduce2=(r,t)=>{let{ops:e,mem:i,salt:a}=t;return o.crypto_pwhash(doauthor.hashSize,r,doauthor.crypto.read(a),e,i,o.crypto_pwhash_ALG_DEFAULT)},window.doauthor.crypto.deriveSigningKeypair=(r,t)=>{const e=o.crypto_kdf_derive_from_key(doauthor.keySize,t,"signsign",r);let{publicKey:i,privateKey:a}=o.crypto_sign_seed_keypair(e);return{public:i,secret:a}},window.doauthor.crypto.sign=(r,t)=>({public:t.public,signature:o.crypto_sign_detached(r,t.secret)}),window.doauthor.crypto.verify=(r,t)=>o.crypto_sign_verify_detached(t.signature,r,t.public),window.doauthor.crypto.bland_hash=r=>doauthor.crypto.show(o.crypto_generichash(doauthor.hashSize,r)),window.doauthor.crypto.canonicalise=function o(r){if("string"==typeof r||"number"==typeof r||"bigint"==typeof r)return r;if("object"==typeof r){if(!0===Array.isArray(r))return r.map((r=>o(r)));{var t=Object.keys(r);const i={...r};t.sort();var e=new Array;for(let r=0;r<t.length;r++)e.push([t[r],o(i[t[r]])]);return e}}},window.doauthor.credential={},window.doauthor.credential.proofless=o=>{ctxs=o["@context"];let{type:r,issuer:t,issuanceDate:e,credentialSubject:i}=o;return{"@context":ctxs,type:r,issuer:t,issuanceDate:e,credentialSubject:i}},window.doauthor.credential.prooflessJSON=o=>JSON.stringify(doauthor.crypto.canonicalise(doauthor.credential.proofless(o))),window.doauthor.credential.verify=(o,r)=>doauthor.crypto.verify(doauthor.credential.prooflessJSON(o),{public:r,signature:doauthor.crypto.read(o.proof.signature)}),window.doauthor.credential.verify64=(o,r)=>doauthor.credential.verify(o,doauthor.crypto.read(r)),window.doauthor.util={},window.doauthor.util.prettyPrint=o=>JSON.stringify(o,null,2),window.__doauthorHasLoaded__=!0}},new Promise(i((()=>[window.__doauthorHasLoaded__])))),e=30,i=(o,r)=>(t,a)=>{var n=void 0;if(o().reduce(((o,r)=>o&&r),!0))return t(o());if(void 0!==r){if(r>0)return a(new Error("Observer timed out"));n=r-e}return setTimeout(i(o,n).bind(void 0,t,a),e)};DoAuthorBootstrapper=r})();