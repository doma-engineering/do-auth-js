var DoAuthor;(()=>{"use strict";var e={d:(o,t)=>{for(var r in t)e.o(t,r)&&!e.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:t[r]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};e.r(o),e.d(o,{main:()=>t,observePeriodMsec:()=>r,observeMany:()=>i});const t=async()=>(window.sodium={onload:e=>{maybePort=()=>window.location.port?":"+window.location.port:"",window.doAuth={server:window.location.protocol+"//"+window.location.hostname+maybePort(),saltSize:16,hashSize:32,keySize:32,defaultParams:{opsLimit:e.crypto_pwhash_OPSLIMIT_SENSITIVE,memLimit:5*e.crypto_pwhash_MEMLIMIT_MIN}},window.doAuth.crypto={},window.doAuth.crypto.show=o=>e.to_base64(o,e.base64_variants.URLSAFE),window.doAuth.crypto.read=o=>e.from_base64(o,e.base64_variants.URLSAFE),window.doAuth.crypto.mainKey=e=>(slipMaybe=localStorage.getItem("slip"),dp=doAuth.defaultParams,slipMaybe?doAuth.crypto.mainKeyReproduce2(e,JSON.parse(slipMaybe)):([mkey,slip]=doAuth.crypto.mainKeyInit2(e,{ops:dp.opsLimit,mem:dp.memLimit,saltSize:doAuth.saltSize}),localStorage.setItem("slip",JSON.stringify(slip)),mkey)),window.doAuth.crypto.mainKeyInit2=(o,t)=>(slip1={...t,salt:doAuth.crypto.show(e.randombytes_buf(t.saltSize))},mkey=doAuth.crypto.mainKeyReproduce2(o,slip1),[mkey,slip1]),window.doAuth.crypto.mainKeyReproduce2=(o,t)=>{let{ops:r,mem:i,saltSize:d,salt:a}=t;return mkey=e.crypto_pwhash(doAuth.hashSize,o,doAuth.crypto.read(a),r,i,e.crypto_pwhash_ALG_DEFAULT),mkey},window.doAuth.crypto.deriveSigningKeypair=(o,t)=>{mkd=e.crypto_kdf_derive_from_key(doAuth.keySize,t,"signsign",o);let{publicKey:r,privateKey:i}=e.crypto_sign_seed_keypair(mkd);return{public:r,secret:i}},window.doAuth.crypto.sign=(o,t)=>({public:t.public,signature:e.crypto_sign_detached(o,t.secret)}),window.doAuth.crypto.verify=(o,t)=>e.crypto_sign_verify_detached(t.signature,o,t.public),window.doAuth.crypto.bland_hash=o=>doAuth.crypto.show(e.crypto_generichash(doAuth.hashSize,o)),window.doAuth.crypto.canonicalise=function e(o){if("string"==typeof o||"number"==typeof o||"bigint"==typeof o)return o;if("object"==typeof o){if(!0===Array.isArray(o))return o.map((o=>e(o)));{var t=Object.keys(o);const i={...o};t.sort();var r=new Array;for(let o=0;o<t.length;o++)r.push([t[o],e(i[t[o]])]);return r}}},window.doAuth.credential={},window.doAuth.credential.proofless=e=>{ctxs=e["@context"];let{type:o,issuer:t,issuanceDate:r,credentialSubject:i}=e;return{"@context":ctxs,type:o,issuer:t,issuanceDate:r,credentialSubject:i}},window.doAuth.credential.prooflessJSON=e=>JSON.stringify(doAuth.crypto.canonicalise(doAuth.credential.proofless(e))),window.doAuth.credential.verify=(e,o)=>doAuth.crypto.verify(doAuth.credential.prooflessJSON(e),{public:o,signature:doAuth.crypto.read(e.proof.signature)}),window.doAuth.credential.verify64=(e,o)=>doAuth.credential.verify(e,doAuth.crypto.read(o)),window.__doAuthHasLoaded__=!0}},new Promise(i((()=>[window.__doAuthHasLoaded__])))),r=30,i=(e,o)=>(t,d)=>e().reduce(((e,o)=>e&&o),!1)?t(maybeVars):o&&o>0?d(new Error("Observer timed out")):void setTimeout(i.bind(void 0,e,t,d,timeLeft-r),r);DoAuthor=o})();